{% extends "base.html" %}

{% block title %}{{ trip.name }} - Details{% endblock %}

{% block extra_head %}
<style>
  .trip-details-container {
    max-width: 900px;
    margin: 3rem auto;
    background-color: #ffffff;
    padding: 2rem;
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
  }

  .trip-image {
    width: 100%;
    height: 320px;
    object-fit: cover;
    border-radius: 12px;
    margin-bottom: 1.5rem;
  }

  .trip-header {
    font-size: 2rem;
    font-weight: 700;
    color: #0d6efd;
    margin-bottom: 1rem;
  }

  .trip-description {
    font-size: 1rem;
    color: #495057;
    margin-bottom: 1.5rem;
  }

  .trip-meta {
    font-size: 1rem;
    margin-bottom: 0.5rem;
  }

  .trip-meta i {
    margin-right: 6px;
  }

  .btn-back {
    margin-top: 2rem;
  }
</style>
{% endblock %}

{% block content %}
<div class="container trip-details-container">
  {% if trip.picture_url %}
    <img src="{{ trip.picture_url }}" alt="{{ trip.name }}" class="trip-image">
  {% endif %}

  <div class="trip-header">{{ trip.name }}</div>
  <p class="trip-description">{{ trip.description }}</p>

  <div class="trip-meta"><i class="bi bi-geo-alt"></i><strong>Route:</strong> {{ trip.start_destination }} â†’ {{ trip.end_destination }}</div>
  <div class="trip-meta"><i class="bi bi-calendar-event"></i><strong>Dates:</strong> {{ trip.start_date }} to {{ trip.end_date }}</div>
  <div class="trip-meta"><i class="bi bi-people"></i><strong>Available spots:</strong> {{ trip.number_of_people }}</div>
  <div class="trip-meta"><i class="bi bi-cash"></i><strong>Price:</strong> ${{ trip.price }}</div>

  <form method="POST" class="mt-4">
    {% csrf_token %}
    <input type="hidden" name="book_trip_id" value="{{ trip.id }}">
    <label for="number_of_people" class="form-label">Number of People</label>
    <input type="number" name="number_of_people" value="1" min="1" max="{{ trip.number_of_people }}" class="form-control mb-3" required>
    <button type="submit" class="btn btn-success w-100">
      <i class="bi bi-check2-circle me-1"></i>Book This Trip
    </button>
  </form>

  <a href="{% url 'travelApp:plan_trip' %}" class="btn btn-outline-secondary w-100 btn-back">
    <i class="bi bi-arrow-left me-1"></i>Back to Search
  </a>
</div>
{% endblock %}
{% if messages %}
  {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  {% endfor %}
{% endif %}
