{% extends "base.html" %}

{% block title %}Plan Your Trip{% endblock %}

{% block extra_head %}
<style>
  .form-section {
    max-width: 700px;
    margin: 4rem auto;
    background-color: #f8f9fa;
    padding: 2.5rem 2rem;
    border-radius: 12px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
  }

  .form-section h2 {
    font-weight: 700;
    margin-bottom: 1.5rem;
    color: #212529;
  }

  .btn-submit {
    width: 100%;
    padding: 0.75rem;
    font-size: 1.1rem;
  }
</style>
{% endblock %}

{% block content %}
<div class="container">
  <div class="form-section">
    <h2 class="text-center">Plan Your Trip</h2>
    <form method="POST">
      {% csrf_token %}
      {{ form.non_field_errors }}
      <div class="mb-3">
        <label for="{{ form.start_destination.id_for_label }}" class="form-label">Start Destination</label>
        {{ form.start_destination }}
      </div>
      <div class="mb-3">
        <label for="{{ form.end_destination.id_for_label }}" class="form-label">End Destination</label>
        {{ form.end_destination }}
      </div>
      <div class="mb-3">
        <label for="{{ form.start_date.id_for_label }}" class="form-label">Start Date</label>
        {{ form.start_date }}
      </div>
      <div class="mb-3">
        <label for="{{ form.end_date.id_for_label }}" class="form-label">End Date</label>
        {{ form.end_date }}
      </div>
      <button type="submit" name="search" class="btn btn-primary btn-submit">
        <i class="bi bi-search me-2"></i>Search Trips
      </button>
    </form>
  </div>

  {% if no_trips %}
    <div class="text-center text-danger fw-bold mt-4">
      No trips available for selected categories
    </div>
  {% endif %}

  {% if available_trips %}
    <div class="mt-5">
      <h4 class="text-center mb-4">Available Trips</h4>
      <div class="list-group">
        {% for trip in available_trips %}
          <div class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <strong>{{ trip.name }}</strong><br>
              {{ trip.start_destination }} → {{ trip.end_destination }}<br>
              {{ trip.start_date }} to {{ trip.end_date }}<br>
              {{ trip.number_of_people }} people · ${{ trip.price }}
            </div>
            <form method="POST">
              {% csrf_token %}
              <input type="hidden" name="book_trip_id" value="{{ trip.id }}">
              <button type="submit" class="btn btn-success">
                <i class="bi bi-check2-circle me-1"></i>Book
              </button>
            </form>
          </div>
        {% endfor %}
      </div>
    </div>
  {% endif %}
</div>
{% endblock %}